<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Mobile Account Setup</title>
<style>
    body {
        font-family: Arial, sans-serif;
        max-width: 700px;
        margin: 30px auto;
    }
    .line-block {
        border: 1px solid #ccc;
        padding: 15px;
        margin: 15px 0;
        border-radius: 8px;
    }
    h3 {
        margin-top: 0;
    }
    input, select {
        width: 100%;
        padding: 6px;
        margin: 4px 0 12px 0;
        border-radius: 4px;
        border: 1px solid #aaa;
    }
#floatingPrintBtn {
    position: fixed;
    top: 20px;
    right: 20px;
    padding: 12px 20px;
    background: #007bff;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
    font-size: 16px;
    box-shadow: 0 3px 8px rgba(0,0,0,0.3);
    z-index: 9999;
}

#floatingPrintBtn:hover {
    background: #0056c7;
}

</style>
</head>
<body>

<h1>Mobile Account Setup</h1>

<label for="lineCount">How many mobile lines?</label>
<input type="number" id="lineCount" min="1" max="20" />
<button onclick="generateLines()">Generate Forms</button>
<button id="floatingPrintBtn" onclick="openPrintView()">Print Forms</button>


<div id="formsContainer"></div>

<script>
function generateLines() {
    const count = parseInt(document.getElementById("lineCount").value, 10);
    const container = document.getElementById("formsContainer");

    container.innerHTML = ""; // clear old forms

    if (!count || count < 1) return;

    for (let i = 1; i <= count; i++) {
        const block = document.createElement("div");
        block.className = "line-block";

        if (count === 1 || i === 1) {
            block.innerHTML = `
                <h3>Line ${i} (Primary)</h3>

                <label>Account Number</label>
                <input type="text" name="acct_${i}" placeholder="Account #">

                <label>User ID</label>
                <input type="text" name="userid_${i}" placeholder="User login ID">

                <label>Password</label>
                <input type="text" name="password_${i}" placeholder="Account password">

                <label>Account PIN</label>
                <input type="text" name="pin_${i}" placeholder="Port-out/Account PIN">

                <label>Temporary Phone Number</label>
                <input type="text" name="tempnum_${i}" placeholder="Number assigned at activation">

                <label>Actual Phone Number</label>
                <input type="text" name="actualnum_${i}" placeholder="Customer's real number">

                <label>Last 4 of Social</label>
                <input type="text" name="ssn_${i}" maxlength="4" placeholder="XXXX">

                <label>Previous Carrier</label>
                <input type="text" name="carrier_${i}" placeholder="Verizon, AT&T, T-Mobile, etc.">

                <label>Phone PIN</label>
                <input type="text" name="phonepin_${i}" maxlength="4" placeholder="XXXX">

                <label>Apple ID</label>
                <input type="text" name="appleid_${i}" placeholder="Apple ID email (if applicable)">

                <label>Apple ID Password</label>
                <input type="text" name="appleidpassword_${i}" placeholder="Apple ID Password (if applicable)">
            `;
        } else {
            block.innerHTML = `
                <h3>Line ${i}</h3>

                <label>Email</label>
                <input type="email" name="email_${i}" placeholder="Customer email">

                <label>Phone PIN</label>
                <input type="text" name="phonepin_${i}" maxlength="4" placeholder="XXXX">

                <label>Temporary Phone Number</label>
                <input type="text" name="tempnum_${i}" placeholder="Temp number for this line">

                <label>Port Phone Number</label>
                <input type="text" name="portnum_${i}" placeholder="Number being ported in">

                <label>Monthly Rate</label>
                <input type="text" name="rate_${i}" placeholder="$ / month for this line">

                <label>Apple ID</label>
                <input type="text" name="appleid_${i}" placeholder="Apple ID email (if applicable)">

                <label>Apple ID Password</label>
                <input type="text" name="appleidpassword_${i}" placeholder="Apple ID Password (if applicable)">
            `;
        }

        container.appendChild(block);
    }
}

function openPrintView() {
    const container = document.getElementById("formsContainer");
    const blocks = container.querySelectorAll(".line-block");

    if (!blocks.length) {
        alert("Generate the mobile account forms first.");
        return;
    }

    // Build simple text-only HTML from the existing forms
    let printContent = "";

    blocks.forEach((block, index) => {
        const titleEl = block.querySelector("h3");
        const title = titleEl ? titleEl.textContent.trim() : `Line ${index + 1}`;

        printContent += `<section class="line-section">`;
        printContent += `<h2>${title}</h2>`;

        const labels = block.querySelectorAll("label");
        labels.forEach(label => {
            const labelText = label.textContent.trim();
            const input = label.nextElementSibling; // the input right after the label
            let value = "";

            if (input && (input.tagName === "INPUT" || input.tagName === "SELECT")) {
                value = input.value || "";
            }

            if (value) {
                printContent += `<p><strong>${labelText}</strong>: ${value}</p>`;
            } else {
                printContent += `<p><strong>${labelText}</strong>:</p>`;
            }
        });

        printContent += `</section>`;
    });

    // Open a new tab
    const printWindow = window.open("", "_blank");

    // Very simple text-focused layout
    printWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
            <meta charset="UTF-8">
            <title>Print Mobile Account Info</title>
            <style>
body {
    font-family: Arial, sans-serif;
    font-size: 12pt;
    max-width: 700px;
    margin: 20px 30px;
    background: white;
    color: black;
}

.logo-wrapper {
    text-align: center;
    margin-bottom: 10px;
}

.logo {
    width: 180px; /* adjust size if needed */
    display: block;
    margin: 0 auto 10px auto;
}

/* Make the logo repeat at the top of every printed page */
@media print {
    .logo-wrapper {
        position: running(header);
    }
    @page {
        @top-center {
            content: element(header);
        }
    }
}
                h1 {
                    text-align: center;
                    margin-bottom: 20px;
                }
                h2 {
                    margin-top: 25px;
                    margin-bottom: 10px;
                    border-bottom: 1px solid #000;
                    padding-bottom: 4px;
                }
                p {
                    margin: 4px 0;
                    padding: 3px 0;
                    border-bottom: 1px solid #000;
                }
                .line-section {
                    margin-bottom: 20px;
                    page-break-after: always; /* each line can go on its own page */
                }
                @page {
                    margin: 15mm;
                }
            </style>
        </head>
<body>
<div class="logo-wrapper">
    <img src="https://github.com/braydenhanning/optimummobileaccountinfo/blob/main/images/logo/Untitled_Artwork.png?raw=true" class="logo">
</div>

    <h1>Mobile Account Info</h1>

    ${printContent}
</body>

        </html>
    `);

    printWindow.document.close();

    printWindow.addEventListener("load", function () {
        printWindow.focus();
        printWindow.print();
    });
}


</script>


</body>
</html>
